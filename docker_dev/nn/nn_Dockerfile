# Используем базовый образ Ubuntu 20.04 для архитектуры ARM64
FROM arm64v8/ubuntu:focal

# Устанавливаем необходимые системные зависимости
RUN apt-get update && apt-get upgrade -y && apt-get install -y \
    build-essential \
    cmake \
    git \
    curl \
    wget \
    unzip \
    libopencv-dev \
    python3-pip \
    python3-dev \
    python3-opencv \
    libatlas-base-dev \
    libopenblas-dev \
    liblapack-dev \
    libblas-dev \
    libeigen3-dev \
    libprotobuf-dev \
    protobuf-compiler \
    libgoogle-glog-dev \
    libgflags-dev \
    liblmdb-dev \
    libsnappy-dev \
    libopencv-core-dev \
    libopencv-highgui-dev \
    libopencv-imgproc-dev \
    libopencv-video-dev \
    libopencv-objdetect-dev \
    libopencv-contrib-dev \
    libopencv-features2d-dev \
    libopencv-calib3d-dev \
    libopencv-stitching-dev \
    libopencv-superres-dev \
    libopencv-viz-dev \
    libopencv-ml-dev \
    libopencv-photo-dev \
    libopencv-shape-dev \
    libopencv-videoio-dev \
    libopencv-videostab-dev \
    libopencv-plot-dev \
    libopencv-surface-android-dev \
    libopencv-ts-dev \
    libopencv-ts-legacy-dev \
    libopencv-java-dev \
    libopencv-python-dev \
    libopencv-doc \
    libopencv-dev \
    # Устанавливаем зависимости для GStreamer
    autoconf \
    automake \
    libtool \
    gstreamer-1.0 \
    gstreamer1.0-dev \
    libgstreamer1.0-0 \
    gstreamer1.0-plugins-base \
    gstreamer1.0-plugins-good \
    gstreamer1.0-plugins-bad \
    gstreamer1.0-plugins-ugly \
    gstreamer1.0-libav \
    gstreamer1.0-doc \
    gstreamer1.0-tools \
    gstreamer1.0-x \
    gstreamer1.0-alsa \
    gstreamer1.0-gl \
    gstreamer1.0-gtk3 \
    gstreamer1.0-qt5 \
    gstreamer1.0-pulseaudio \
    && apt-get clean && rm -rf /var/lib/apt/lists/*

# Устанавливаем необходимые Python-библиотеки
RUN pip3 install --upgrade pip && \
    pip3 install \
    torch \
    torchvision \
    torchaudio \
    matplotlib \
    numpy \
    opencv-python \
    scikit-learn

# Копируем локальный код в контейнер
# COPY . /app

# Устанавливаем рабочую директорию
# WORKDIR /app

# Команда по умолчанию при запуске контейнера
# CMD ["python3", "your_script.py"]
